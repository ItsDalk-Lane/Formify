# MVP #014: FormService 核心

## 状态: pending

## 目标
实现表单提交的核心逻辑。

## 功能边界
- [x] FormService 类
- [x] 表单验证调用
- [x] 字段值处理（内置变量替换）
- [x] Action Chain 执行
- [x] FormExecutionManager（执行状态管理）
- [x] 超时和中断支持

## 不做
- 表单打开 UI
- 并行执行

## 验收标准
1. 表单能正确提交
2. 验证失败时中断执行
3. 动作链按顺序执行

## 依赖
- MVP008（条件过滤）
- MVP011（Action Chain）
- MVP013（基础 Action）

## 参考代码
```typescript
// src/service/FormService.ts
export class FormService {
  async submit(
    idValues: Record<string, any>,
    config: FormConfig,
    options?: SubmitOptions
  ): Promise<void> {
    // 1. 验证
    const errors = FormValidator.validate(config, idValues);
    if (errors.length > 0) throw new ValidationError(errors);

    // 2. 处理字段值
    const processedValues = await FormFieldValueProcessor.processValues(idValues, this.app);

    // 3. 创建 FormState
    const state = new FormState(processedValues, config.fields);

    // 4. 执行 Action Chain
    const chain = new ActionChain(config.actions, this.services);
    await chain.run(new ActionContext(this.app, state, this.services));
  }
}
```

## 预估时间
90-120 分钟
