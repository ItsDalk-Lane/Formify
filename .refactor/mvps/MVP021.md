# MVP #021: OpenAI Provider 实现

## 状态: pending

## 目标
实现 OpenAI API 集成，作为第一个 AI Provider。

## 功能边界
- [x] OpenAIProvider 类
- [x] Chat 完成 API
- [x] 流式输出支持
- [x] 错误处理
- [x] 模型列表

## 不做
- 其他 Provider
- Tool Calling
- 图像生成

## 验收标准
1. 能发送聊天请求
2. 能获取流式响应
3. 错误能正确处理

## 依赖
- MVP020（Provider 框架）

## 参考代码
```typescript
// src/features/tars/providers/openAI.ts
import OpenAI from 'openai';

export class OpenAIProvider implements AIProvider {
  private client: OpenAI;

  constructor(settings: ProviderSettings) {
    this.client = new OpenAI({
      apiKey: settings.options.apiKey,
      baseURL: settings.options.baseUrl,
      dangerouslyAllowBrowser: true
    });
  }

  async chat(messages: Message[]): Promise<string> {
    const response = await this.client.chat.completions.create({
      model: this.settings.model,
      messages: messages.map(m => ({ role: m.role, content: m.content }))
    });
    return response.choices[0].message.content || '';
  }

  async *chatStream(messages: Message[]): AsyncGenerator<string> {
    const stream = await this.client.chat.completions.create({
      model: this.settings.model,
      messages: messages.map(m => ({ role: m.role, content: m.content })),
      stream: true
    });
    for await (const chunk of stream) {
      yield chunk.choices[0]?.delta?.content || '';
    }
  }
}
```

## 预估时间
60-90 分钟
