# MVP #024: Tab Completion 功能

## 状态: pending

## 目标
实现编辑器中的 AI Tab 补全功能。

## 功能边界
- [x] TabCompletionService 类
- [x] TabCompletionExtension（CodeMirror 扩展）
- [x] GhostTextWidget（灰字提示）
- [x] ContextBuilder（上下文构建）
- [x] 快捷键支持

## 不做
- 复杂上下文识别
- 多 Provider 切换

## 验收标准
1. 按快捷键能触发补全
2. 补全建议以灰字显示
3. Tab 能接受补全

## 依赖
- MVP020（Provider 框架）
- MVP021（OpenAI Provider）

## 参考代码
```typescript
// src/features/tars/tab-completion/TabCompletionService.ts
export class TabCompletionService {
  async complete(context: CompletionContext): Promise<string | null> {
    const { textBefore, textAfter } = context;
    const prompt = this.buildPrompt(textBefore, textAfter);
    const provider = this.getProvider();
    return provider.chat([{ role: 'user', content: prompt }]);
  }

  private buildPrompt(before: string, after: string): string {
    return `Continue the following text naturally:
${before}[CURSOR]${after}

Only output the continuation, nothing else.`;
  }
}
```

## 预估时间
120-150 分钟
